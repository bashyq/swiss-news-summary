/* ‚ïê‚ïê‚ïê DESIGN TOKENS ‚ïê‚ïê‚ïê */
:root {
  --bg: #0a0a0a; --bg2: #111; --card: #161616; --card-hover: #1a1a1a;
  --text: #fafafa; --text2: #a0a0a0; --muted: #666;
  --accent: #FF0000; --accent-dim: rgba(255,0,0,.15);
  --border: rgba(255,255,255,.08); --border2: rgba(255,255,255,.04);
  --radius: 10px; --font: 'DM Sans',-apple-system,BlinkMacSystemFont,sans-serif;
  --serif: 'Playfair Display',Georgia,serif;
}
[data-theme="light"] {
  --bg: #fff; --bg2: #f5f5f5; --card: #fff; --card-hover: #fafafa;
  --text: #1a1a1a; --text2: #555; --muted: #888;
  --accent: #dc2626; --accent-dim: rgba(220,38,38,.1);
  --border: rgba(0,0,0,.1); --border2: rgba(0,0,0,.05);
}
[data-theme="light"] .card { box-shadow: 0 1px 3px rgba(0,0,0,.08); }

/* ‚ïê‚ïê‚ïê RESET ‚ïê‚ïê‚ïê */
*,*::before,*::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: var(--font); background: var(--bg); color: var(--text);
  min-height: 100dvh; line-height: 1.6; overscroll-behavior-y: contain;
}
body::before {
  content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 1000; opacity: .03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}
a { color: var(--accent); text-decoration: none; }

/* ‚ïê‚ïê‚ïê LAYOUT ‚ïê‚ïê‚ïê */
.container { max-width: 720px; margin: 0 auto; padding: 0 24px; padding-top: max(env(safe-area-inset-top),20px); padding-bottom: 100px; }
.pull-indicator { position: fixed; top: 0; left: 0; right: 0; text-align: center; padding: 20px; color: var(--muted); font-size: .8rem; letter-spacing: .1em; text-transform: uppercase; background: linear-gradient(to bottom,var(--bg),transparent); transform: translateY(-100%); transition: transform .3s; z-index: 100; }
.pull-indicator.active { transform: translateY(0); }

/* ‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê */
header { padding: 32px 0 20px; border-bottom: 1px solid var(--border); margin-bottom: 12px; }
.header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.date-display { font-size: .75rem; color: var(--muted); text-transform: uppercase; letter-spacing: .15em; font-weight: 500; }
.header-controls { display: flex; align-items: center; gap: 8px; }
.icon-btn { background: var(--bg2); border: 1px solid var(--border); border-radius: 6px; color: var(--text); font-family: inherit; font-size: .75rem; font-weight: 600; cursor: pointer; padding: 6px 12px; display: flex; align-items: center; gap: 6px; transition: border-color .2s; }
.icon-btn:hover { border-color: var(--accent); }
.icon-btn svg { width: 14px; height: 14px; opacity: .6; }

.title-row { display: flex; align-items: flex-start; justify-content: space-between; gap: 16px; }
.page-title { font-family: var(--serif); font-size: 2rem; font-weight: 700; line-height: 1.15; letter-spacing: -0.02em; }
.accent { color: var(--accent); }

.weather-compact { display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: var(--bg2); border: 1px solid var(--border); border-radius: 8px; transition: border-color .2s; flex-shrink: 0; margin-top: 4px; }
.weather-compact:hover { border-color: var(--accent); }
.weather-temp { font-size: 1.1rem; font-weight: 700; }
.weather-icon { font-size: 1.2rem; }
.weather-wind { font-size: .7rem; color: var(--muted); }

.weather-dropdown { display: none; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-top: 12px; }
.weather-dropdown.active { display: block; }
.hourly-forecast { display: flex; gap: 8px; overflow-x: auto; padding: 8px 0; }
.hourly-item { text-align: center; min-width: 52px; font-size: .75rem; color: var(--text2); }
.hourly-item .temp { color: var(--text); font-weight: 600; }

.history-inline { display: none; margin-top: 12px; padding: 10px 14px; background: var(--bg2); border-left: 2px solid var(--accent); border-radius: 0 6px 6px 0; font-size: .8rem; color: var(--text2); line-height: 1.4; }
.history-inline.active { display: block; }
.history-title { font-size: .65rem; text-transform: uppercase; letter-spacing: .1em; color: var(--muted); margin-bottom: 4px; }
.history-year { color: var(--accent); font-weight: 700; }

/* ‚ïê‚ïê‚ïê CITY DROPDOWN ‚ïê‚ïê‚ïê */
.city-dropdown { display: none; position: absolute; top: 100%; right: 0; margin-top: 4px; background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 4px; min-width: 140px; z-index: 100; box-shadow: 0 8px 24px rgba(0,0,0,.3); }
.city-dropdown.active { display: block; }
.city-option { display: block; width: 100%; padding: 8px 12px; border: none; background: none; color: var(--text); font-family: inherit; font-size: .8rem; cursor: pointer; border-radius: 6px; text-align: left; }
.city-option:hover { background: var(--accent-dim); }
.city-option.active { color: var(--accent); font-weight: 600; }
.city-selector { position: relative; }

/* ‚ïê‚ïê‚ïê TRANSPORT ‚ïê‚ïê‚ïê */
.transport-widget { margin-top: 12px; padding: 12px 14px; background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); cursor: pointer; }
.transport-header { display: flex; align-items: center; gap: 8px; font-size: .8rem; font-weight: 600; }
.transport-status { width: 8px; height: 8px; border-radius: 50%; }
.transport-status.normal { background: #22c55e; }
.transport-status.minor { background: #eab308; }
.transport-status.major { background: #ef4444; }
.transport-details { display: none; margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); }
.transport-details.active { display: block; }
.delay-item { display: flex; justify-content: space-between; align-items: center; padding: 4px 0; font-size: .75rem; color: var(--text2); }
.delay-badge { background: var(--accent-dim); color: var(--accent); padding: 2px 6px; border-radius: 4px; font-weight: 600; font-size: .7rem; }

/* ‚ïê‚ïê‚ïê NAV (tabs) ‚ïê‚ïê‚ïê */
nav { margin: 16px 0; }
.tabs { display: flex; gap: 4px; overflow-x: auto; padding: 2px 0; scrollbar-width: none; }
.tabs::-webkit-scrollbar { display: none; }
.tab-btn { padding: 8px 14px; border: 1px solid var(--border); border-radius: 20px; background: none; color: var(--text2); font-family: inherit; font-size: .75rem; font-weight: 500; cursor: pointer; white-space: nowrap; transition: all .2s; display: flex; align-items: center; gap: 6px; }
.tab-btn:hover { border-color: var(--text2); }
.tab-btn.active { background: var(--text); color: var(--bg); border-color: var(--text); }
.tab-count { font-size: .65rem; opacity: .7; }

/* ‚ïê‚ïê‚ïê VIEW SWITCHING ‚ïê‚ïê‚ïê */
.app-view { display: none; }
.app-view.active { display: block; }

/* ‚ïê‚ïê‚ïê CARDS ‚ïê‚ïê‚ïê */
.card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 10px; transition: border-color .2s; }
.card:hover { border-color: rgba(255,255,255,.15); }
.card-headline { font-family: var(--serif); font-size: 1rem; font-weight: 600; line-height: 1.35; margin-bottom: 6px; }
.card-headline a { color: var(--text); }
.card-headline a:hover { color: var(--accent); }
.card-summary { font-size: .85rem; color: var(--text2); line-height: 1.5; }
.card-detail { display: none; font-size: .8rem; color: var(--text2); line-height: 1.5; margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border2); }
.card-detail.active { display: block; }
.card-meta { display: flex; align-items: center; gap: 8px; margin-top: 8px; font-size: .7rem; color: var(--muted); flex-wrap: wrap; }
.card-source { font-weight: 600; text-transform: uppercase; letter-spacing: .05em; }
.sentiment-badge { padding: 2px 6px; border-radius: 4px; font-size: .65rem; font-weight: 600; text-transform: uppercase; }
.sentiment-positive { background: rgba(34,197,94,.15); color: #22c55e; }
.sentiment-neutral { background: rgba(156,163,175,.15); color: #9ca3af; }
.sentiment-negative { background: rgba(239,68,68,.15); color: #ef4444; }
.freshness { font-size: .65rem; color: var(--muted); }

.section { display: none; }
.section.active { display: block; }

/* ‚ïê‚ïê‚ïê TRENDING ‚ïê‚ïê‚ïê */
.trending-banner { background: linear-gradient(135deg,var(--accent-dim),transparent); border: 1px solid rgba(255,0,0,.2); border-radius: var(--radius); padding: 14px 16px; margin-bottom: 16px; cursor: pointer; }
.trending-label { font-size: .65rem; text-transform: uppercase; letter-spacing: .1em; color: var(--accent); font-weight: 600; margin-bottom: 4px; }
.trending-topic { font-family: var(--serif); font-size: 1.1rem; font-weight: 600; }

/* ‚ïê‚ïê‚ïê BRIEFING ‚ïê‚ïê‚ïê */
.briefing-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; margin-bottom: 20px; position: relative; }
.briefing-dismiss { position: absolute; top: 12px; right: 12px; background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1.2rem; }
.briefing-greeting { font-size: .75rem; text-transform: uppercase; letter-spacing: .1em; color: var(--accent); font-weight: 600; margin-bottom: 8px; }
.briefing-story { margin-bottom: 12px; }
.briefing-story-headline { font-family: var(--serif); font-size: 1rem; font-weight: 600; margin-bottom: 4px; cursor: pointer; }
.briefing-story-headline:hover { color: var(--accent); }
.briefing-story-summary { font-size: .85rem; color: var(--text2); }
.briefing-activity { padding-top: 12px; border-top: 1px solid var(--border); font-size: .85rem; color: var(--text2); }

/* ‚ïê‚ïê‚ïê ACTIVITIES ‚ïê‚ïê‚ïê */
.subtitle { font-size: .8rem; color: var(--text2); margin-bottom: 16px; }
.filter-bar { display: flex; gap: 6px; overflow-x: auto; padding: 4px 0; margin-bottom: 16px; scrollbar-width: none; }
.filter-bar::-webkit-scrollbar { display: none; }
.filter-btn { padding: 6px 12px; border: 1px solid var(--border); border-radius: 16px; background: none; color: var(--text2); font-family: inherit; font-size: .75rem; cursor: pointer; white-space: nowrap; transition: all .2s; }
.filter-btn:hover { border-color: var(--text2); }
.filter-btn.active { background: var(--text); color: var(--bg); border-color: var(--text); }

.activity-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px; margin-bottom: 10px; border-left: 4px solid var(--border); cursor: pointer; transition: border-color .2s, transform .2s, box-shadow .2s; position: relative; }
.activity-card:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,.12); }
[data-theme="light"] .activity-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,.08); }
.activity-card.cat-animals { border-left-color: #f59e0b; }
.activity-card.cat-museum { border-left-color: #8b5cf6; }
.activity-card.cat-playground { border-left-color: #22c55e; }
.activity-card.cat-outdoor { border-left-color: #10b981; }
.activity-card.cat-nature { border-left-color: #34d399; }
.activity-card.cat-indoor-play { border-left-color: #f472b6; }
.activity-card.cat-event { border-left-color: #3b82f6; }
.activity-card.cat-seasonal { border-left-color: #ef4444; }
.activity-card.cat-stayhome { border-left-color: #6b7280; }
.activity-card.cat-cafe { border-left-color: #92400e; }
.activity-card.cat-other { border-left-color: var(--muted); }
.activity-name { font-family: var(--serif); font-size: 1rem; font-weight: 600; margin-bottom: 4px; display: flex; align-items: center; gap: 8px; padding-right: 36px; }
.activity-emoji { font-size: 1.4rem; line-height: 1; flex-shrink: 0; }
.activity-desc { font-size: .82rem; color: var(--text2); margin-bottom: 8px; line-height: 1.5; }
.activity-badges { display: flex; gap: 6px; flex-wrap: wrap; }
.badge { padding: 3px 8px; border-radius: 6px; font-size: .68rem; font-weight: 600; letter-spacing: .02em; }
.badge-indoor { background: rgba(59,130,246,.12); color: #3b82f6; }
.badge-outdoor { background: rgba(34,197,94,.12); color: #22c55e; }
.badge-price { background: var(--bg2); color: var(--text2); }
.badge-duration { background: var(--bg2); color: var(--text2); }
.badge-distance { background: rgba(168,85,247,.12); color: #a855f7; }
.badge-seasonal { padding: 3px 8px; border-radius: 6px; font-size: .68rem; font-weight: 600; }
.badge-winter { background: rgba(59,130,246,.12); color: #60a5fa; }
.badge-summer { background: rgba(234,179,8,.12); color: #eab308; }
.badge-autumn { background: rgba(249,115,22,.12); color: #f97316; }
.badge-spring { background: rgba(34,197,94,.12); color: #22c55e; }
.badge-recurring { background: rgba(168,85,247,.12); color: #a855f7; font-size: .68rem; padding: 3px 8px; border-radius: 6px; font-weight: 600; }
.badge-subcategory { background: var(--accent-dim); color: var(--accent); font-size: .68rem; padding: 3px 8px; border-radius: 6px; font-weight: 600; }
.activity-save { position: absolute; top: 12px; right: 12px; background: none; border: none; font-size: 1.2rem; cursor: pointer; padding: 4px; line-height: 1; transition: transform .2s; z-index: 1; }
.activity-save:hover { transform: scale(1.2); }
.activity-actions { display: flex; gap: 6px; margin-top: 10px; }
.activity-actions button { padding: 5px 10px; border: 1px solid var(--border); border-radius: 6px; background: none; color: var(--text2); font-family: inherit; font-size: .7rem; cursor: pointer; transition: all .2s; }
.activity-actions button:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-dim); }
.materials-info { font-size: .75rem; color: var(--muted); margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border2); }

/* Age filter */
.age-filter { display: flex; gap: 6px; margin-bottom: 14px; align-items: center; }
.age-filter::before { content: 'üë∂'; font-size: .8rem; margin-right: 2px; }
.age-btn { padding: 4px 10px; border: 1px solid var(--border); border-radius: 12px; background: none; color: var(--text2); font-family: inherit; font-size: .7rem; cursor: pointer; transition: all .2s; }
.age-btn:hover { border-color: var(--text2); }
.age-btn.active { background: var(--accent-dim); color: var(--accent); border-color: var(--accent); }

/* Surprise button */
.surprise-btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 14px; border: none; border-radius: var(--radius); background: linear-gradient(135deg, var(--accent-dim) 0%, rgba(168,85,247,.12) 100%); color: var(--accent); font-family: inherit; font-size: .9rem; font-weight: 600; cursor: pointer; margin-bottom: 16px; transition: all .25s; }
.surprise-btn:hover { background: linear-gradient(135deg, var(--accent) 0%, #a855f7 100%); color: #fff; transform: translateY(-1px); box-shadow: 0 4px 16px rgba(255,0,0,.2); }
.surprise-btn:active { transform: translateY(0); }
.surprise-btn:disabled { opacity: .4; cursor: not-allowed; transform: none; box-shadow: none; }

/* Map */
.map-container { height: 300px; border-radius: var(--radius); overflow: hidden; margin-bottom: 16px; border: 1px solid var(--border); position: relative; z-index: 0; }
.map-container.compact { height: 180px; pointer-events: none; }
.map-container.expanded { height: 400px; pointer-events: auto; }

/* Custom activity form */
.add-form { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 16px; display: none; }
.add-form.active { display: block; }
.add-form input, .add-form textarea, .add-form select { width: 100%; padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text); font-family: inherit; font-size: .85rem; margin-bottom: 8px; }
.add-form textarea { min-height: 60px; resize: vertical; }
.form-row { display: flex; gap: 8px; }
.form-row > * { flex: 1; }
.btn-primary { padding: 8px 16px; background: var(--accent); color: #fff; border: none; border-radius: 6px; font-family: inherit; font-size: .85rem; font-weight: 600; cursor: pointer; }
.btn-secondary { padding: 8px 16px; background: var(--bg2); color: var(--text2); border: 1px solid var(--border); border-radius: 6px; font-family: inherit; font-size: .85rem; cursor: pointer; }
.btn-add { padding: 8px 16px; border: 1px dashed var(--border); border-radius: 6px; background: none; color: var(--text2); font-family: inherit; font-size: .8rem; cursor: pointer; width: 100%; margin-top: 8px; }
.btn-add:hover { border-color: var(--accent); color: var(--accent); }

/* ‚ïê‚ïê‚ïê EVENTS CALENDAR ‚ïê‚ïê‚ïê */
.calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.calendar-nav { background: none; border: 1px solid var(--border); border-radius: 6px; color: var(--text2); cursor: pointer; padding: 6px 10px; font-size: .8rem; }
.calendar-nav:hover { border-color: var(--accent); }
.calendar-month { font-family: var(--serif); font-size: 1.1rem; font-weight: 600; }
.calendar-grid { display: grid; grid-template-columns: repeat(7,1fr); gap: 2px; margin-bottom: 16px; }
.calendar-day-header { text-align: center; font-size: .65rem; color: var(--muted); padding: 4px; text-transform: uppercase; }
.calendar-day { text-align: center; padding: 8px 4px; font-size: .8rem; cursor: pointer; border-radius: 6px; position: relative; min-height: 36px; }
.calendar-day:hover { background: var(--bg2); }
.calendar-day.today { font-weight: 700; color: var(--accent); }
.calendar-day.selected { background: var(--accent); color: #fff; border-radius: 6px; }
.calendar-day.other-month { color: var(--muted); opacity: .4; }
.calendar-dots { display: flex; gap: 2px; justify-content: center; margin-top: 2px; }
.calendar-dot { width: 4px; height: 4px; border-radius: 50%; }
.dot-holiday { background: #ef4444; }
.dot-festival { background: #a855f7; }
.dot-recurring { background: #3b82f6; }
.dot-seasonal { background: #22c55e; }

.event-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px; margin-bottom: 8px; }
.event-date { font-size: .7rem; color: var(--accent); font-weight: 600; margin-bottom: 4px; }
.event-name { font-family: var(--serif); font-size: .95rem; font-weight: 600; margin-bottom: 4px; }
.event-desc { font-size: .8rem; color: var(--text2); }
.event-badges { display: flex; gap: 6px; margin-top: 6px; }
.badge-toddler { background: rgba(34,197,94,.15); color: #22c55e; }
.badge-free { background: rgba(59,130,246,.15); color: #3b82f6; }

/* ‚ïê‚ïê‚ïê WEEKEND PLANNER ‚ïê‚ïê‚ïê */
.weekend-day { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 12px; }
.weekend-day-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.weekend-day-name { font-family: var(--serif); font-size: 1.1rem; font-weight: 600; }
.weekend-weather { display: flex; align-items: center; gap: 6px; font-size: .85rem; }
.weekend-slot { padding: 10px; background: var(--bg2); border-radius: 8px; margin-bottom: 8px; }
.weekend-slot-label { font-size: .7rem; text-transform: uppercase; letter-spacing: .05em; color: var(--muted); margin-bottom: 4px; }
.weekend-activity-name { font-weight: 600; margin-bottom: 2px; }
.weekend-activity-desc { font-size: .8rem; color: var(--text2); }
.weekend-actions { display: flex; gap: 8px; margin-top: 12px; }
.weekend-actions button { flex: 1; }

/* ‚ïê‚ïê‚ïê LUNCH ‚ïê‚ïê‚ïê */
.lunch-spot { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 12px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; }
.lunch-name { font-weight: 600; margin-bottom: 2px; }
.lunch-cuisine { font-size: .75rem; color: var(--text2); }
.lunch-badges { display: flex; gap: 4px; margin-top: 4px; flex-wrap: wrap; }
.lunch-actions { display: flex; flex-direction: column; gap: 4px; flex-shrink: 0; }
.lunch-actions button { padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; background: none; color: var(--text2); font-size: .7rem; cursor: pointer; white-space: nowrap; }
.lunch-actions button:hover { border-color: var(--accent); color: var(--accent); }
.star-rating { display: flex; gap: 2px; }
.star { cursor: pointer; font-size: .9rem; opacity: .3; }
.star.filled { opacity: 1; }
.badge-open { background: rgba(34,197,94,.15); color: #22c55e; }
.badge-closed { background: rgba(239,68,68,.15); color: #ef4444; }
.badge-wheelchair { background: rgba(59,130,246,.15); color: #3b82f6; }
.badge-outdoor-seat { background: rgba(234,179,8,.15); color: #eab308; }
.badge-takeaway { background: rgba(168,85,247,.15); color: #a855f7; }

/* ‚ïê‚ïê‚ïê MODAL / SURPRISE ‚ïê‚ïê‚ïê */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.7); z-index: 500; justify-content: center; align-items: center; padding: 24px; }
.modal-overlay.active { display: flex; }
.modal-content { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 32px 24px; max-width: 400px; width: 100%; text-align: center; position: relative; }
.modal-emoji { font-size: 3rem; margin-bottom: 12px; }
.modal-title { font-family: var(--serif); font-size: 1.3rem; font-weight: 700; margin-bottom: 8px; }
.modal-desc { font-size: .9rem; color: var(--text2); margin-bottom: 16px; }
.modal-badges { display: flex; gap: 6px; justify-content: center; flex-wrap: wrap; margin-bottom: 16px; }
.modal-close { position: absolute; top: 12px; right: 16px; background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1.5rem; }
.modal-actions { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
.modal-actions button { padding: 10px 20px; border-radius: 8px; font-family: inherit; font-size: .85rem; font-weight: 600; cursor: pointer; }

/* ‚ïê‚ïê‚ïê MENU ‚ïê‚ïê‚ïê */
.menu-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.5); z-index: 200; }
.menu-overlay.active { display: block; }
.menu-panel { position: fixed; top: 0; right: 0; bottom: 0; width: 280px; background: var(--card); border-left: 1px solid var(--border); z-index: 300; transform: translateX(100%); transition: transform .3s; padding: 24px; overflow-y: auto; }
.menu-panel.active { transform: translateX(0); }
.menu-close { position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--text); cursor: pointer; font-size: 1.5rem; }
.menu-title { font-family: var(--serif); font-size: 1.2rem; font-weight: 600; margin-bottom: 24px; padding-top: 8px; }
.menu-item { display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid var(--border2); cursor: pointer; color: var(--text2); font-size: .85rem; transition: color .2s; }
.menu-item:hover, .menu-item.active { color: var(--accent); }
.menu-item-icon { font-size: 1.1rem; width: 24px; text-align: center; }
.menu-section { margin-top: 20px; padding-top: 12px; border-top: 1px solid var(--border); }
.menu-section-title { font-size: .7rem; text-transform: uppercase; letter-spacing: .1em; color: var(--muted); margin-bottom: 8px; }
.menu-holiday { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; font-size: .8rem; color: var(--text2); }
.menu-holiday-days { font-size: .7rem; color: var(--accent); font-weight: 600; }
.about-grid { margin-top: 4px; }
.about-row { display: flex; justify-content: space-between; align-items: center; padding: 4px 0; font-size: .8rem; }
.about-label { color: var(--text2); }
.about-val { color: var(--text); font-family: monospace; font-size: .75rem; }
.about-module { padding-left: 12px; }
.about-module .about-label { color: var(--muted); font-size: .75rem; }

.lang-toggle { display: flex; gap: 4px; }
.lang-btn { padding: 4px 10px; border: 1px solid var(--border); border-radius: 4px; background: none; color: var(--text2); font-family: inherit; font-size: .75rem; cursor: pointer; }
.lang-btn.active { background: var(--accent-dim); color: var(--accent); border-color: var(--accent); }
.theme-toggle { padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: none; color: var(--text2); font-family: inherit; font-size: .8rem; cursor: pointer; width: 100%; text-align: left; margin-top: 8px; }
.theme-toggle:hover { border-color: var(--accent); }

/* ‚ïê‚ïê‚ïê LOADING ‚ïê‚ïê‚ïê */
.skeleton { background: linear-gradient(90deg,var(--bg2) 25%,var(--card) 50%,var(--bg2) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: var(--radius); }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
.loading-skeleton { padding: 16px; }
.skeleton-line { height: 14px; margin-bottom: 10px; border-radius: 4px; }
.skeleton-line:nth-child(1) { width: 70%; }
.skeleton-line:nth-child(2) { width: 100%; }
.skeleton-line:nth-child(3) { width: 85%; }
.skeleton-title { height: 20px; width: 60%; margin-bottom: 16px; border-radius: 4px; }
.loading-msg { text-align: center; padding: 40px; color: var(--muted); font-size: .85rem; }

/* ‚ïê‚ïê‚ïê INSTALL PROMPT ‚ïê‚ïê‚ïê */
.install-prompt { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px; }
.install-prompt button { padding: 6px 12px; border-radius: 6px; font-family: inherit; font-size: .8rem; cursor: pointer; }
.install-text { flex: 1; font-size: .85rem; }

/* ‚ïê‚ïê‚ïê SUNSHINE ‚ïê‚ïê‚ïê */
.sunshine-legend { display: flex; gap: 16px; margin-bottom: 16px; flex-wrap: wrap; }
.legend-item { display: flex; align-items: center; gap: 6px; font-size: .75rem; color: var(--text2); }
.legend-dot { width: 12px; height: 12px; border-radius: 50%; }
.dot-sunny { background: #f59e0b; }
.dot-partly { background: #60a5fa; }
.dot-cloudy { background: #6b7280; }

.sunshine-sort { display: flex; gap: 6px; margin-bottom: 12px; }
.sort-btn { padding: 6px 12px; border: 1px solid var(--border); border-radius: 16px; background: none; color: var(--text2); font-family: inherit; font-size: .75rem; cursor: pointer; transition: all .2s; }
.sort-btn.active { background: var(--text); color: var(--bg); border-color: var(--text); }

.sunshine-dates { text-align: center; font-size: .8rem; color: var(--muted); margin-bottom: 12px; font-weight: 500; letter-spacing: .05em; }

.sunshine-list { display: flex; flex-direction: column; gap: 10px; }

.sunshine-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px; cursor: pointer; transition: border-color .2s; border-left: 4px solid var(--border); }
.sunshine-card:hover { border-color: rgba(255,255,255,.15); }
.sunshine-sunny { border-left-color: #f59e0b; }
.sunshine-partly { border-left-color: #60a5fa; }
.sunshine-cloudy { border-left-color: #6b7280; }

.sunshine-card-header { display: flex; align-items: center; gap: 12px; }
.sunshine-rank { width: 28px; height: 28px; border-radius: 50%; background: var(--bg2); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: .75rem; font-weight: 700; color: var(--text2); flex-shrink: 0; }
.sunshine-sunny .sunshine-rank { background: rgba(245,158,11,.15); color: #f59e0b; border-color: rgba(245,158,11,.3); }
.sunshine-partly .sunshine-rank { background: rgba(96,165,250,.15); color: #60a5fa; border-color: rgba(96,165,250,.3); }

.sunshine-card-info { flex: 1; min-width: 0; }
.sunshine-card-name { font-family: var(--serif); font-size: .95rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sunshine-card-region { font-size: .7rem; color: var(--muted); }

.sunshine-card-total { text-align: right; flex-shrink: 0; }
.sunshine-total-num { font-size: 1.3rem; font-weight: 700; line-height: 1; }
.sunshine-sunny .sunshine-total-num { color: #f59e0b; }
.sunshine-partly .sunshine-total-num { color: #60a5fa; }
.sunshine-cloudy .sunshine-total-num { color: #6b7280; }
.sunshine-total-label { font-size: .6rem; color: var(--muted); text-transform: uppercase; letter-spacing: .05em; }

.sunshine-card-body { margin-top: 10px; }
.sunshine-badges { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 8px; }
.sunshine-drive-badge, .sunshine-dist-badge { display: inline-block; font-size: .7rem; color: var(--text2); background: var(--bg2); padding: 2px 8px; border-radius: 4px; }
.sunshine-dist-badge { background: rgba(168,85,247,.15); color: #a855f7; }

.sunshine-days { display: flex; gap: 8px; }
.sunshine-day { flex: 1; text-align: center; background: var(--bg2); border-radius: 6px; padding: 6px 4px; }
.sunshine-day-label { font-size: .6rem; color: var(--muted); text-transform: uppercase; letter-spacing: .05em; margin-bottom: 2px; }
.sunshine-day-icon { font-size: 1.1rem; }
.sunshine-day-temp { font-size: .7rem; color: var(--text2); }
.sunshine-day-sun { font-size: .7rem; font-weight: 600; color: #f59e0b; }
.sunshine-day-rain { font-size: .65rem; color: #60a5fa; }

.sunshine-timeline { display: flex; gap: 1px; margin-top: 4px; }
.timeline-slot { flex: 1; height: 6px; background: var(--border); border-radius: 1px; }
.timeline-slot.slot-sunny { background: #f59e0b; }
.timeline-labels { display: flex; justify-content: space-between; font-size: .5rem; color: var(--muted); margin-top: 1px; }

.legend-bar-sample { width: 24px; height: 6px; border-radius: 2px; background: linear-gradient(90deg, var(--border) 0%, var(--border) 30%, #f59e0b 30%, #f59e0b 80%, var(--border) 80%); }

.sunshine-baseline { border-left-color: #a855f7; background: linear-gradient(135deg, rgba(168,85,247,.06) 0%, transparent 60%); }
.sunshine-baseline .sunshine-total-num { color: #a855f7; }
.sunshine-rank-baseline { background: rgba(168,85,247,.15); color: #a855f7; border-color: rgba(168,85,247,.3); font-size: .85rem; }
.sunshine-baseline-badge { display: inline-block; font-size: .7rem; color: #a855f7; background: rgba(168,85,247,.15); padding: 2px 8px; border-radius: 4px; font-weight: 600; }
.dot-baseline { background: #a855f7; }
.sunshine-baseline + .sunshine-card { margin-top: 4px; border-top: 1px dashed var(--border); padding-top: 14px; }

.sunshine-escape { background: linear-gradient(135deg, rgba(245,158,11,.08) 0%, rgba(168,85,247,.06) 60%); border: 1px solid rgba(245,158,11,.25); border-left: 4px solid #f59e0b; border-radius: var(--radius); padding: 12px 14px; cursor: pointer; transition: border-color .2s; margin: 2px 0; }
.sunshine-escape:hover { border-color: #f59e0b; }
.sunshine-escape-label { display: block; font-size: .7rem; color: #f59e0b; font-weight: 600; text-transform: uppercase; letter-spacing: .05em; margin-bottom: 4px; }
.sunshine-escape-dest { font-size: .85rem; color: var(--text); }

.sunshine-expand-btn { display: block; width: 100%; padding: 12px; border: 1px dashed var(--border); border-radius: var(--radius); background: none; color: var(--text2); font-family: inherit; font-size: .85rem; cursor: pointer; margin-top: 8px; transition: all .2s; }
.sunshine-expand-btn:hover { border-color: var(--accent); color: var(--accent); }

.sunshine-highlights { display: none; margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); }
.sunshine-card.expanded .sunshine-highlights { display: block; }
.sunshine-highlights-title { font-family: var(--serif); font-size: .85rem; font-weight: 600; margin-bottom: 10px; }
.sunshine-highlight { padding: 8px 0; border-bottom: 1px solid var(--border2); }
.sunshine-highlight:last-child { border-bottom: none; }
.sunshine-highlight-name { font-size: .85rem; font-weight: 600; display: flex; align-items: center; gap: 6px; }
.sunshine-highlight-desc { font-size: .75rem; color: var(--text2); margin-top: 2px; line-height: 1.4; }
.sunshine-highlight-actions { display: flex; align-items: center; gap: 10px; margin-top: 6px; }
.sunshine-highlight-actions a { font-size: .7rem; color: var(--accent); }
.sunshine-links { display: flex; gap: 16px; margin-top: 12px; padding-top: 10px; border-top: 1px solid var(--border2); }
.sunshine-links a { font-size: .78rem; color: var(--accent); }
.sunshine-link { font-size: .78rem; color: var(--accent); cursor: pointer; margin-top: 8px; font-weight: 500; }
.sunshine-link:hover { text-decoration: underline; }

/* ‚ïê‚ïê‚ïê DONATE ‚ïê‚ïê‚ïê */
.donate-amounts { display: flex; gap: 8px; justify-content: center; margin-bottom: 16px; }
.donate-amount-btn { padding: 8px 16px; border: 1px solid var(--border); border-radius: 8px; background: none; color: var(--text2); font-family: inherit; font-size: .9rem; font-weight: 600; cursor: pointer; transition: all .2s; min-width: 64px; }
.donate-amount-btn:hover { border-color: var(--accent); color: var(--accent); }
.donate-amount-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }
.donate-apple-pay-container { margin: 16px 0 8px; min-height: 48px; }
.donate-status { font-size: .8rem; color: var(--text2); text-align: center; min-height: 20px; }

/* ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê */
#toast-container { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); z-index: 600; display: flex; flex-direction: column; gap: 8px; align-items: center; pointer-events: none; }
.toast { padding: 10px 20px; border-radius: 8px; font-size: .82rem; font-weight: 500; color: #fff; pointer-events: auto; animation: toastIn .3s ease; opacity: 0; transition: opacity .3s; }
.toast.show { opacity: 1; }
.toast-success { background: #16a34a; }
.toast-error { background: #dc2626; }
.toast-info { background: #2563eb; }
@keyframes toastIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
[data-theme="light"] .toast-success { background: #15803d; }
[data-theme="light"] .toast-error { background: #b91c1c; }
[data-theme="light"] .toast-info { background: #1d4ed8; }

/* ‚ïê‚ïê‚ïê SKELETON CARD ‚ïê‚ïê‚ïê */
.skeleton-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 10px; }
.skeleton-card .skeleton-line { margin-bottom: 8px; }

/* ‚ïê‚ïê‚ïê EMPTY STATE ‚ïê‚ïê‚ïê */
.empty-state { text-align: center; padding: 48px 24px; }
.empty-state-icon { font-size: 2.5rem; margin-bottom: 12px; }
.empty-state-msg { font-size: .95rem; font-weight: 600; color: var(--text); margin-bottom: 6px; }
.empty-state-hint { font-size: .8rem; color: var(--muted); }

/* ‚ïê‚ïê‚ïê CARD HIGHLIGHT ‚ïê‚ïê‚ïê */
.card-highlight { animation: cardPulse .8s ease; }
@keyframes cardPulse { 0% { box-shadow: 0 0 0 0 rgba(255,0,0,.3); } 50% { box-shadow: 0 0 0 6px rgba(255,0,0,.15); } 100% { box-shadow: 0 0 0 0 rgba(255,0,0,0); } }
[data-theme="light"] .card-highlight { animation: cardPulseLight .8s ease; }
@keyframes cardPulseLight { 0% { box-shadow: 0 0 0 0 rgba(220,38,38,.3); } 50% { box-shadow: 0 0 0 6px rgba(220,38,38,.15); } 100% { box-shadow: 0 0 0 0 rgba(220,38,38,0); } }

/* ‚ïê‚ïê‚ïê WHAT'S ON VIEW ‚ïê‚ïê‚ïê */
.whatson-date-label { font-size: .75rem; text-transform: uppercase; letter-spacing: .15em; color: var(--muted); font-weight: 500; margin-bottom: 16px; }

.whatson-holiday-banner { display: flex; align-items: center; gap: 10px; padding: 14px 16px; background: linear-gradient(135deg, rgba(168,85,247,.15) 0%, rgba(168,85,247,.05) 100%); border: 1px solid rgba(168,85,247,.25); border-radius: var(--radius); margin-bottom: 16px; font-weight: 600; font-size: .9rem; color: #a855f7; }

.whatson-weather-card { display: flex; align-items: center; justify-content: space-between; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 16px; cursor: pointer; transition: border-color .2s; }
.whatson-weather-card:hover { border-color: rgba(255,255,255,.15); }
.whatson-weather-main { display: flex; align-items: center; gap: 12px; }
.whatson-weather-icon { font-size: 2rem; line-height: 1; }
.whatson-weather-temp { font-size: 1.5rem; font-weight: 700; }
.whatson-weather-desc { font-size: .85rem; color: var(--text2); }
.whatson-weather-rec { font-size: .8rem; color: var(--text2); background: var(--bg2); padding: 6px 12px; border-radius: 16px; white-space: nowrap; }

.whatson-section { margin-bottom: 20px; }
.whatson-section-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
.whatson-section-icon { font-size: 1.1rem; line-height: 1; }
.whatson-section-title { font-family: var(--serif); font-size: 1.05rem; font-weight: 600; }

.whatson-festival-card { background: var(--card); border: 1px solid var(--border); border-left: 4px solid #a855f7; border-radius: var(--radius); padding: 14px; margin-bottom: 10px; cursor: pointer; transition: border-color .2s, transform .2s; }
.whatson-festival-card:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,.12); }
.whatson-festival-name { font-family: var(--serif); font-size: .95rem; font-weight: 600; margin-bottom: 4px; }
.whatson-festival-desc { font-size: .82rem; color: var(--text2); margin-bottom: 8px; line-height: 1.5; }
.whatson-festival-meta { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.whatson-festival-date { font-size: .7rem; color: var(--muted); }

.whatson-activity-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 12px 14px; margin-bottom: 8px; cursor: pointer; transition: border-color .2s, transform .2s; }
.whatson-activity-card:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,.12); }
.whatson-activity-name { font-size: .9rem; font-weight: 600; display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.whatson-activity-badges { display: flex; gap: 6px; flex-wrap: wrap; }

.whatson-trending { background: linear-gradient(135deg, var(--accent-dim), transparent); border: 1px solid rgba(255,0,0,.2); border-radius: var(--radius); padding: 14px 16px; cursor: pointer; }
.whatson-trending:hover { border-color: var(--accent); }

[data-theme="light"] .whatson-festival-card:hover,
[data-theme="light"] .whatson-activity-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,.08); }

/* ‚ïê‚ïê‚ïê RESPONSIVE ‚ïê‚ïê‚ïê */
@media (max-width: 480px) {
  .container { padding: 0 16px; }
  .page-title { font-size: 1.6rem; }
  .card-headline { font-size: .95rem; }
}
